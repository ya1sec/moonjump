<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Moonjump</title>
  <!-- Meta tags -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Add Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- CSS -->
  <link rel="stylesheet" type="text/css" media="screen" href="/static/assets/css/hack.css" />
  <link rel="stylesheet" type="text/css" href="/static/assets/css/orb.css" />
  <!-- Add custom Tailwind config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'neon-red': '#ff0033',
          },
        },
      },
    }
  </script>
  <script src="/static/assets/js/orb.js"></script>
</head>

<body>
  <!-- Top Toolbar -->
  <div id="top-toolbar">
    <div class="relative flex items-center">
      <input type="search" id="search-bar" placeholder="Search..." class="pe-10">
      <span class="absolute inset-y-0 end-3 grid place-content-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="w-4 h-4 text-gray-500">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
        </svg>
      </span>
    </div>
  </div>

  <!-- Main Content -->
  <div id="main-content">
    <div class="orb-container">
      <div class="glow"></div>
      <div class="orb"></div>
    </div>
    <p>Moonjump is a server that redirects you to a random page harvested from the arcane depths of the web.</p>
  </div>

  <!-- Jump Result (Iframe) -->
  <div id="jump-result" style="display: none;">
    <button class="close-button">&times;</button>
    <div class="iframe-container">
      <iframe id="jump-iframe" sandbox="allow-scripts allow-same-origin allow-popups allow-forms"></iframe>
    </div>
  </div>

  <!-- Info Section -->
  <div id="info-section" style="display: none;">
    <div id="info-content">
      <h2>About Moonjump</h2>
      <p>Moonjump is a server that redirects you to a random page harvested from the arcane depths of the web.</p>
      <!-- Add more informational content as needed -->
      <button id="close-info-button">Close</button>
    </div>
  </div>

  <!-- Bottom Toolbar -->
  <div id="bottom-toolbar">
    <div class="toolbar-buttons">
      <button id="share-button" class="toolbar-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
          <path
            d="M5 7.5C5 8.32843 4.32843 9 3.5 9C2.67157 9 2 8.32843 2 7.5C2 6.67157 2.67157 6 3.5 6C4.32843 6 5 6.67157 5 7.5Z"
            fill="currentColor" />
          <path
            d="M13 3.5C13 4.32843 12.3284 5 11.5 5C10.6716 5 10 4.32843 10 3.5C10 2.67157 10.6716 2 11.5 2C12.3284 2 13 2.67157 13 3.5Z"
            fill="currentColor" />
          <path
            d="M13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 10.6716 10.6716 10 11.5 10C12.3284 10 13 10.6716 13 11.5Z"
            fill="currentColor" />
          <path d="M4.5 7.5L10.5 4.5M4.5 7.5L10.5 11" stroke="currentColor" />
        </svg>
        <span>Share</span>
      </button>

      <button id="jump-button" class="toolbar-button">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z"
            fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" />
        </svg>
        <span>Jump</span>
      </button>

      <button id="close-button" class="toolbar-button close-button">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12.8536 2.14645C13.0488 2.34171 13.0488 2.65829 12.8536 2.85355L2.85355 12.8536C2.65829 13.0488 2.34171 13.0488 2.14645 12.8536C1.95118 12.6583 1.95118 12.3417 2.14645 12.1464L12.1464 2.14645C12.3417 1.95118 12.6583 1.95118 12.8536 2.14645Z"
            fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" />
          <path
            d="M2.14645 2.14645C2.34171 1.95118 2.65829 1.95118 2.85355 2.14645L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L2.14645 2.85355C1.95118 2.65829 1.95118 2.34171 2.14645 2.14645Z"
            fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" />
        </svg>
        <span>Close</span>
      </button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const jumpButton = document.getElementById('jump-button');
      const shareButton = document.getElementById('share-button');
      const closeButtons = document.querySelectorAll('.close-button');
      const jumpResult = document.getElementById('jump-result');
      const jumpIframe = document.getElementById('jump-iframe');
      const infoButton = document.getElementById('info-button');
      const searchBar = document.getElementById('search-bar');
      const infoSection = document.getElementById('info-section');

      // Jump functionality
      jumpButton.addEventListener('click', function () {
        fetch('/jump')
          .then(response => response.json())
          .then(data => {
            if (data.url) {
              if (data.can_embed) {
                jumpIframe.src = data.url;
                jumpResult.style.display = 'block';
              } else {
                window.open(data.url, '_blank');
              }
            }
          })
          .catch(error => {
            console.error('Error:', error);
          });
      });

      // Share functionality
      shareButton.addEventListener('click', function () {
        const url = jumpIframe.src;
        if (!url || url === 'about:blank') {
          alert('No content to share.');
          return;
        }
        if (navigator.share) {
          navigator.share({
            title: 'Check this out!',
            url: url
          }).then(() => {
            console.log('Thanks for sharing!');
          }).catch(console.error);
        } else {
          // Fallback for browsers that do not support the Web Share API
          alert('Your browser does not support the Web Share API');
        }
      });

      // Close functionality for both close buttons
      closeButtons.forEach(function (button) {
        button.addEventListener('click', function () {
          jumpResult.style.display = 'none';
          jumpIframe.src = 'about:blank';
        });
      });

      // Info button functionality
      infoButton.addEventListener('click', function () {
        infoSection.style.display = 'block';
      });

      // Close info section
      document.getElementById('close-info-button').addEventListener('click', function () {
        infoSection.style.display = 'none';
      });

      // Search functionality
      searchBar.addEventListener('keydown', function (event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          const query = searchBar.value.trim();
          if (!query) return;

          fetch('/search?query=' + encodeURIComponent(query))
            .then(response => response.json())
            .then(data => {
              if (data.error) {
                console.error('Search error:', data.error);
                return;
              }
              if (data.url) {
                jumpIframe.src = data.url;
                jumpResult.style.display = 'block';
              }
            })
            .catch(error => {
              console.error('Error:', error);
            });
        }
      });

      // Add pressed state handling for jump button
      jumpButton.addEventListener('mousedown', function () {
        this.classList.remove('hover:scale-105');
        this.classList.add('scale-95');
        this.style.boxShadow = 'inset 0 0 20px rgba(255, 255, 255, 0.5)';
      });

      jumpButton.addEventListener('mouseup', function () {
        this.classList.remove('scale-95');
        this.classList.add('hover:scale-105');
      });
    });
  </script>
</body>

</html>